# 作業一覧（チェックリスト）

このチェックリストは **作業の過程で随時追加・更新していく「生きたドキュメント」** です。
- 完了した項目はチェック済みにします。
- 新しいタスクが見つかったら、このファイルに遠慮なく追記してOKです。

---

## Phase 0: 事前準備（環境）
- [x] Dev Container（python 3.12）で開発できる
- [x] 依存関係インストール（requirements）
- [x] 音声デバイス共有（/dev/snd）確認

## Phase 1: ベンチマークと反射回路（DSP-first）

### Step 1.0: 遅延計測ベンチマーク
- [x] ベンチCLI実装（マイク→特徴量→判定→停止）
- [x] p50/p95/p99/std を算出できる
- [x] stopイベントを JSONL に保存できる
- [x] デバイス一覧/デバイス指定オプション追加（入力/出力 index）
- [x] ビープ対策（デフォルト無音出力）
- [x] 実機で計測実施（入力4/出力0）
- [x] 計測結果を保存（outputs配下）

### Step 1.1: Reflex Circuit プロトタイプ（古典DSP）
- [x] 適応閾値（EMA）
- [x] 不感期（hold-off）
- [x] ループバック抑制フック（loopback_active）
- [x] ユニットテスト（Reflex/特徴量）
- [ ] Reflex Circuit をSNN版へ置換（SpikingJelly, 固定重み + 安全ロジック）
- [ ] SNN版Reflexで誤検知チューニング（咳払い/打音など）

### Step 1.2: 停止制御（Motor Cortex側のHard Stop）
- [ ] VOICEVOX等の実TTS再生キューのクリア
- [ ] オーディオデバイスのリセット（APIレベルでプリエンプティブ確認）
- [ ] 停止のエンドツーエンド測定（TTSを含む）

---

## Phase 2: 記憶回路と文脈制御

### Step 2.1: カスタムSTPニューロン
- [x] `STP_LIFNode` 実装（Tsodyks–Markram）
- [x] ユニットテスト追加

### Step 2.2: Memory Capacity (MC) 探索
- [ ] 500〜1000ニューロンのリザーバ構築
- [ ] 入力パターン生成（ランダム/疑似会話テンポ）
- [ ] MCスコア計測（過去入力の復元）
- [ ] 探索パラメータ sweep（tau_F/tau_D/W_scale）
- [ ] 結果をCSV/JSONで保存

### Step 2.3: Readout + 次元削減
- [ ] Random Projection 実装
- [ ] Readoutが参照する状態ベクトル設計（どの信号を含めるか）

### Step 2.4: オンライン学習（RLS）
- [ ] 忘却係数 lambda + Tikhonov正則化
- [ ] 更新間隔（10–50ms）での安定動作

---

## Phase 3: システム統合と非同期制御
- [ ] マルチプロセス設計（Audio/Core/Cognitive）
- [ ] Lock-free Ring Buffer (SPSC) 導入
- [ ] Stop信号を物理レベルで最優先する制御

---

## Phase 4: UX向上と常駐化
- [ ] Brain Visualizer（デバッグ可視化）
- [ ] 会話パラメータのチューニングUI/設定管理

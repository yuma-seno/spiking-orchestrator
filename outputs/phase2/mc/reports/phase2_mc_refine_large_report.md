# Phase 2: Memory Capacity (MC) レポート

このレポートは、Phase 2 Step 2.2（MC最大化探索）の結果CSVを集計して、
**良さそうなパラメータ候補（上位）**を見つけるための一覧です。

- 入力CSV: outputs/phase2/mc/runs/phase2_mc_refine_large.csv
- 総試行数: 4390
- ユニーク条件数: 750

## これは何の数値？（MCの超ざっくり説明）

- **MC（Memory Capacity）** は『少し前の入力を、今のリザーバ状態からどれだけ復元できるか』のスコアです。
- 数値は **大きいほど短期記憶が強い** と解釈します（ただし比較は同じ設定同士で行います）。
- 例え話/図解で掴みたい場合: docs/ガイド.md の「MC」節

## 今回の実験条件（共通設定）

- ニューロン数 n: 600
- ステップ数 steps: 16000（長いほど時間がかかる）
- washout: 1600（最初の過渡を捨てる）
- max_delay: 400（何ステップ前まで復元するか）
- ridge（回帰の正則化）: 0.001
- sparsity（結合の疎さ）: 0.1

## 発火率のチェック（任意だが重要）

- spike_rate は『1ステップ×1ニューロンあたりの平均発火率』です。0に近いと“動いていない”可能性があります。
- 全体の平均 spike_rate: 0.000034

## Top candidates (mean MC)

表の見方:
- **mean MC**: 同じ条件を複数回（seed/repeats）走らせた平均
- **std**: ばらつき（小さいほど安定）
- **n_runs**: 平均を取った回数
- **mean spike_rate**: 同じ条件の平均発火率（0に近い場合は要注意）

| rank | mean MC | std | n_runs | mean spike_rate | tauF_ms | tauD_ms | w_scale | U | rec | v_th | in_scale | in_bias | dc_bias |
|---:|---:|---:|---:|---:|---:|---:|---:|---:|:--|---:|---:|---:|---:|
| 1 | 2.0130 | 0.4266 | 5 | 0.000029 | 350 | 1500 | 1.100 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 2 | 1.9544 | 0.3268 | 5 | 0.000032 | 500 | 1250 | 1.100 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 3 | 1.8803 | 0.5872 | 10 | 0.000037 | 700 | 1000 | 1.100 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 4 | 1.8039 | 0.2056 | 5 | 0.000020 | 500 | 3000 | 0.900 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 5 | 1.8029 | 0.6718 | 5 | 0.000032 | 300 | 1250 | 1.050 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 6 | 1.7978 | 0.1747 | 5 | 0.000042 | 300 | 750 | 0.900 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 7 | 1.7849 | 0.2238 | 5 | 0.000043 | 550 | 750 | 0.850 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 8 | 1.7783 | 0.2728 | 5 | 0.000036 | 150 | 1000 | 1.100 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 9 | 1.7746 | 0.7882 | 5 | 0.000051 | 250 | 500 | 0.850 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 10 | 1.7480 | 0.3476 | 5 | 0.000036 | 400 | 1000 | 0.950 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 11 | 1.7453 | 0.5005 | 10 | 0.000029 | 200 | 1500 | 1.000 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 12 | 1.7440 | 0.2485 | 5 | 0.000043 | 600 | 750 | 0.800 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 13 | 1.7398 | 0.4457 | 5 | 0.000027 | 300 | 1750 | 0.950 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 14 | 1.7382 | 0.4341 | 5 | 0.000027 | 350 | 1750 | 0.800 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |
| 15 | 1.7304 | 0.6394 | 5 | 0.000036 | 250 | 1000 | 1.050 | 0.800 | spike | 0.500 | 0.500 | 0.000 | 0.300 |

## Best

- mean MC=2.0130 (std=0.4266, n_runs=5)
- mean spike_rate=0.000029
- tauF=350ms, tauD=1500ms, w_scale=1.100, U=0.800
- rec=spike, v_threshold=0.500
- input_scale=0.500, input_bias=0.000, dc_bias=0.300

## パラメータの意味（超ざっくり）

- tauF_ms / tauD_ms: STP（短期可塑性）の時定数。値で記憶の残り方が変わる
- w_scale: リカレント結合の強さ（大きいほど影響が強いが、暴れやすいこともある）
- U: STPの効きやすさ（大きいほど入力が通りやすい）
- rec: 再帰に使う信号（spike or v）。spikeはSNNっぽいが死にやすいことがある
- v_th: 発火しやすさ（小さいほど発火しやすい）
- input_scale/input_bias: 入力の強さ/平均シフト
- dc_bias: 一定のバイアス電流（発火を立ち上げるために使う）

## 注意（比較のしかた）

- MCは“絶対値”というより、**同じ共通設定の中での相対比較**が安全です。
- stdが大きい候補は、seed次第で性能が落ちる可能性があるため、追加のrepeatsで確認してください。
- mean spike_rate が0に近い候補は“動いていない”可能性があるため、まず発火率を上げてから比較してください。
